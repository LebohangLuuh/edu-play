package com.example.English;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.widget.ImageButton;

import androidx.appcompat.app.ActionBarDrawerToggle;
import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;
import androidx.drawerlayout.widget.DrawerLayout;

import com.example.edu_play.R;
import com.google.android.material.navigation.NavigationView;

import java.util.ArrayList;
import java.util.List;

import Afrikaans.Afrikaans_Version;
import Sesotho.Sesotho_Version;
import Zulu.Zulu_Version;

public class MainActivity extends AppCompatActivity {
    MediaPlayer startupSong;
    DrawerLayout drawerLayout;
    NavigationView navigationView;
    Toolbar toolbar;

    private List<Activity> openActivities;

    private void  StartupSong()
    {
        startupSong = MediaPlayer.create(this, R.raw.stimela);
        startupSong.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {
                startupSong.release();
            }
        });
        startupSong.start();
    }

    public void closeApp() {
        for (Activity activity : openActivities) {
            if (activity != null) {
                activity.finish();
            }
        }
        openActivities.clear();
    }

    @Override
    protected  void onDestroy()
    {
        super.onDestroy();
        openActivities.remove(this);
    }

    @Override
    protected void onResume() {
        super.onResume();
        StartupSong();
    }

    @Override
    protected void onPause()
    {
        super.onPause();
        startupSong.pause();
    }

    @Override
    public void onBackPressed() {
        new AlertDialog.Builder(MainActivity.this)
                .setMessage("Exit the App?").setCancelable(false)
                .setPositiveButton("Yes", (dialog, which) -> System.exit(0)).setNegativeButton("No",null).show();
        startupSong.release();
       // super.onBackPressed();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        openActivities = new ArrayList<>();
        openActivities.add(this); //Add activity to list of opened activities

        toolbar = findViewById(R.id.toolbar);
        drawerLayout = findViewById(R.id.drawer_Layout);
        navigationView = findViewById(R.id.nav_view);

        ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(this,drawerLayout,toolbar,R.string.open,R.string.close);
        drawerLayout.addDrawerListener(toggle);
        toggle.syncState();

        toggle.getDrawerArrowDrawable().setColor(getResources().getColor(R.color.white));

        navigationView.setNavigationItemSelectedListener(menuItem -> {
            if (menuItem.getItemId() == R.id.about_App)
            {
                Intent intent = new Intent(MainActivity.this, About.class);
                startActivity(intent);
                startupSong.stop();
            } else if (menuItem.getItemId() == R.id.exit_App)
            {
                new AlertDialog.Builder(MainActivity.this)
                        .setMessage("Exit the App?").setCancelable(false)
                        .setPositiveButton("Yes", (dialog, which) -> finishAffinity())
                        .setNegativeButton("No",null).show();
                startupSong.stop();
            }
            else if (menuItem.getItemId() == R.id.share_App)
            {
                Intent shareIntent = new Intent(Intent.ACTION_SEND);
                shareIntent.setType("text/plain");
                String subject = "Edu-Play App";
                String body = "Check this educational application for toddlers with multiple activities \nhttps://github.com/LebohangLuuh"; // include the app link
                shareIntent.putExtra(Intent.EXTRA_SUBJECT,subject);
                shareIntent.putExtra(Intent.EXTRA_TEXT,body);
                startActivity(Intent.createChooser(shareIntent,"Share Via"));
            }else if (menuItem.getItemId() == R.id.Eng_Version)
            {
                startupSong.stop();
                Intent intentEnglish = new Intent(MainActivity.this, MainActivity.class);
                startActivity(intentEnglish);
            }
            else if (menuItem.getItemId() == R.id.Sesotho_Version)
            {
                startupSong.stop();
                Intent intent_Sotho = new Intent(this, Sesotho_Version.class);
                startActivity(intent_Sotho);
            }
            else if (menuItem.getItemId() == R.id.Zulu_Version)
            {
                startupSong.stop();
                Intent intent_Zulu = new Intent(this, Zulu_Version.class);
                startActivity(intent_Zulu);
            }
            else if (menuItem.getItemId() == R.id.Afr_Version)
            {
                startupSong.stop();
                Intent intent_Afr = new Intent(this, Afrikaans_Version.class);
                startActivity(intent_Afr);
            }
            return true;
        });

        ImageButton buttonVowels = findViewById(R.id.vowels);
        ImageButton buttonAlphabets = findViewById(R.id.alphabets);
        ImageButton buttonCalendar = findViewById(R.id.calendar);
        ImageButton buttonCareers = findViewById(R.id.careers);
        ImageButton buttonColors = findViewById(R.id.colors);
        ImageButton buttonCount = findViewById(R.id.count);
        ImageButton buttonDays = findViewById(R.id.days);
        ImageButton buttonMoney = findViewById(R.id.money);
        ImageButton buttonPhonics = findViewById(R.id.phonics);
        ImageButton buttonProvince = findViewById(R.id.province);
        ImageButton buttonSeasons = findViewById(R.id.seasons);
        ImageButton buttonShapes = findViewById(R.id.shapes);
        ImageButton buttonAnimals = findViewById(R.id.animals);
        ImageButton buttonTraffic_Light = findViewById(R.id.traffic_Light);
        ImageButton buttonPlanets = findViewById(R.id.planets);

        buttonVowels.setOnClickListener(v -> {

            Intent intent = new Intent(MainActivity.this, Vowel_Eng.class);
            startActivity(intent);
            startupSong.stop();
        });
        buttonDays.setOnClickListener(v -> {

            Intent intentDays = new Intent(MainActivity.this, Weekdays.class);
            startActivity(intentDays);
            startupSong.stop();
        });
        buttonMoney.setOnClickListener(v -> {

            Intent intentMoney = new Intent(MainActivity.this, Money.class);
            startActivity(intentMoney);
            startupSong.stop();
        });
        buttonPhonics.setOnClickListener(v -> {

            Intent intentPhonics = new Intent(MainActivity.this, Phonics.class);
            startActivity(intentPhonics);
            startupSong.stop();
        });
        buttonSeasons.setOnClickListener(v -> {

            Intent intentSeason = new Intent(MainActivity.this, Year_Seasons.class);
            startActivity(intentSeason);
            startupSong.stop();
        });
        buttonShapes.setOnClickListener(v -> {

            Intent intentShapes = new Intent(MainActivity.this, Shapes.class);
            startActivity(intentShapes);
            startupSong.stop();
        });
        buttonProvince.setOnClickListener(v -> {

            Intent intentProvince = new Intent(MainActivity.this, Provinces.class);
            startActivity(intentProvince);
            startupSong.stop();
        });
        buttonCareers.setOnClickListener(v -> {

            Intent intentCareer = new Intent(MainActivity.this, Careers.class);
            startActivity(intentCareer);
            startupSong.stop();
        });
        buttonCalendar.setOnClickListener(v -> {

            Intent intentCalender = new Intent(MainActivity.this, Calender.class);
            startActivity(intentCalender);
            startupSong.stop();
        });
        buttonCount.setOnClickListener(v -> {

            Intent intentCount = new Intent(MainActivity.this, Numbers.class);
            startActivity(intentCount);
            startupSong.stop();
        });
        buttonColors.setOnClickListener(v -> {

            Intent intentColor = new Intent(MainActivity.this, Colors.class);
            startActivity(intentColor);
            startupSong.stop();
        });
        buttonAlphabets.setOnClickListener(v -> {

            Intent intentAlphabet = new Intent(MainActivity.this, Alphabets.class);
            startActivity(intentAlphabet);
            startupSong.stop();
        });
        buttonTraffic_Light.setOnClickListener(v -> {

            Intent intentRobot = new Intent(MainActivity.this, Traffic_Light.class);
            startActivity(intentRobot);
            startupSong.stop();
        });
        buttonPlanets.setOnClickListener(v -> {

            Intent intentPlanet = new Intent(MainActivity.this, Planets.class);
            startActivity(intentPlanet);
            startupSong.stop();
        });
        buttonAnimals.setOnClickListener(v -> {

            Intent intentAnimal = new Intent(MainActivity.this, Animals.class);
            startActivity(intentAnimal);
            startupSong.stop();
        });
    }
}